import{_ as P,c as B,r as n,a as u,o as d,w as e,b as o,d as r,t as g,e as x,f as A,g as H,u as J,h as q,F as K,i as M,j as Q}from"./index-DYtbXqbq.js";import{_ as W,a as X}from"./ConfirmDialog-CeGkphes.js";const Y={class:"d-flex align-center ga-2 mb-3"},Z={__name:"AppointmentCard",props:{appointment:{type:Object,required:!0},referenceId:{type:String,default:null}},emits:["edit","delete"],setup(m,{emit:v}){const i=m,_=v,p=new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),f=B(()=>{const b=new Date(`${i.appointment.date}T00:00`);return p.format(b)}),c=B(()=>i.referenceId===i.appointment.id),y=B(()=>{const b=new Date;return new Date(`${i.appointment.date}T${i.appointment.time}`)<b});return(b,a)=>{const E=n("v-card-title"),I=n("v-card-subtitle"),w=n("v-col"),k=n("v-chip"),N=n("v-row"),T=n("v-card-item"),S=n("v-icon"),D=n("v-avatar"),l=n("v-alert"),t=n("v-card-text"),V=n("v-divider"),C=n("v-btn"),$=n("v-spacer"),U=n("v-card-actions"),z=n("v-card");return d(),u(z,{elevation:c.value?6:2,class:"appointment-card h-100",color:y.value?"grey-lighten-4":void 0},{default:e(()=>[o(T,null,{default:e(()=>[o(N,{class:"align-center"},{default:e(()=>[o(w,{cols:"8"},{default:e(()=>[o(E,{class:"text-h6 font-weight-bold"},{default:e(()=>[r(g(m.appointment.clientName),1)]),_:1}),o(I,{class:"text-body-2"},{default:e(()=>[r(g(f.value)+" • "+g(m.appointment.time)+"h ",1)]),_:1})]),_:1}),o(w,{cols:"4",class:"text-right"},{default:e(()=>[c.value?(d(),u(k,{key:0,color:"secondary",variant:"flat","prepend-icon":"mdi-star",label:""},{default:e(()=>[...a[2]||(a[2]=[r(" Próximo ",-1)])]),_:1})):y.value?(d(),u(k,{key:1,color:"grey-darken-1",class:"text-white",variant:"flat",label:""},{default:e(()=>[...a[3]||(a[3]=[r(" Concluído ",-1)])]),_:1})):(d(),u(k,{key:2,color:"primary",class:"text-white",variant:"flat",label:""},{default:e(()=>[...a[4]||(a[4]=[r(" Agendado ",-1)])]),_:1}))]),_:1})]),_:1})]),_:1}),o(t,{class:"text-body-2"},{default:e(()=>[x("div",Y,[o(D,{color:"primary",variant:"tonal",size:"42"},{default:e(()=>[o(S,{color:"primary-darken-4"},{default:e(()=>[...a[5]||(a[5]=[r("mdi-content-cut",-1)])]),_:1})]),_:1}),x("div",null,[a[6]||(a[6]=x("strong",null,"Serviço:",-1)),x("span",null,g(m.appointment.service),1)])]),m.appointment.notes?(d(),u(l,{key:0,type:"info",variant:"tonal",color:"primary",class:"mb-2",density:"compact"},{default:e(()=>[r(g(m.appointment.notes),1)]),_:1})):(d(),u(l,{key:1,type:"info",variant:"tonal",color:"grey",density:"compact",class:"mb-2"},{default:e(()=>[...a[7]||(a[7]=[r(" Sem observações. ",-1)])]),_:1}))]),_:1}),o(V),o(U,null,{default:e(()=>[o(C,{color:"primary",variant:"text",onClick:a[0]||(a[0]=L=>_("edit",m.appointment.id)),"prepend-icon":"mdi-pencil"},{default:e(()=>[...a[8]||(a[8]=[r(" Editar ",-1)])]),_:1}),o($),o(C,{color:"error",variant:"text",onClick:a[1]||(a[1]=L=>_("delete",m.appointment.id)),"prepend-icon":"mdi-delete"},{default:e(()=>[...a[9]||(a[9]=[r(" Remover ",-1)])]),_:1})]),_:1})]),_:1},8,["elevation","color"])}}},ee=P(Z,[["__scopeId","data-v-30380171"]]),te={class:"appointments-board"},oe={__name:"AppointmentsBoard",setup(m){const v=A(""),i=A(!1),_=A(!1),p=A(null),f=A(null),c=H({show:!1,color:"success",text:""}),{appointments:y,nextAppointment:b,updateAppointment:a,deleteAppointment:E,getAppointmentById:I}=J(),w=B(()=>v.value?y.value.filter(l=>{const t=v.value.toLowerCase();return l.clientName.toLowerCase().includes(t)||l.service.toLowerCase().includes(t)||(l.professional??"").toLowerCase().includes(t)}):y.value),k=l=>{const t=I(l);t&&(p.value={...t},i.value=!0)},N=l=>{p.value&&(a(p.value.id,l),i.value=!1,D("Atendimento atualizado com sucesso!","success"))},T=l=>{f.value=l,_.value=!0},S=()=>{f.value&&(E(f.value),D("Atendimento removido.","error"),f.value=null)},D=(l,t)=>{c.text=l,c.color=t,c.show=!0};return(l,t)=>{const V=n("v-col"),C=n("v-text-field"),$=n("v-row"),U=n("v-sheet"),z=n("v-alert"),L=n("v-card-title"),h=n("v-card-text"),F=n("v-card"),R=n("v-dialog"),O=n("v-snackbar");return d(),q("div",te,[o(U,{class:"pa-6 mb-6",elevation:"2",rounded:"lg"},{default:e(()=>[o($,null,{default:e(()=>[o(V,{cols:"12",md:"8"},{default:e(()=>[...t[5]||(t[5]=[x("h2",{class:"text-h4 font-weight-bold mb-2"},"Próximos atendimentos",-1),x("p",{class:"text-body-2 text-medium-emphasis"}," Acompanhe a agenda da barbearia em tempo real e gerencie os compromissos com rapidez. ",-1)])]),_:1}),o(V,{cols:"12",md:"4",class:"d-flex align-end"},{default:e(()=>[o(C,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),label:"Pesquisar por cliente ou serviço","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":"",density:"comfortable"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),w.value.length?(d(),u($,{key:0,class:"g-6"},{default:e(()=>[(d(!0),q(K,null,M(w.value,s=>(d(),u(V,{key:s.id,cols:"12",md:"6",lg:"4"},{default:e(()=>{var j;return[o(ee,{appointment:s,"reference-id":((j=Q(b))==null?void 0:j.id)??null,onEdit:G=>k(s.id),onDelete:G=>T(s.id)},null,8,["appointment","reference-id","onEdit","onDelete"])]}),_:2},1024))),128))]),_:1})):(d(),u(z,{key:1,type:"info",variant:"tonal",color:"primary",class:"rounded-xl"},{default:e(()=>[...t[6]||(t[6]=[r(" Nenhum atendimento cadastrado para os filtros atuais. Tente ajustar a pesquisa ou cadastre um novo atendimento. ",-1)])]),_:1})),o(R,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s),"max-width":"720"},{default:e(()=>[o(F,null,{default:e(()=>[o(L,{class:"text-h6 font-weight-bold"},{default:e(()=>[...t[7]||(t[7]=[r("Editar atendimento",-1)])]),_:1}),o(h,null,{default:e(()=>[o(X,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),"submit-label":"Atualizar",onSubmit:N},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(W,{modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=s=>_.value=s),title:"Remover atendimento",message:"Tem certeza que deseja remover este atendimento? Esta ação não pode ser desfeita.",onConfirm:S},null,8,["modelValue"]),o(O,{modelValue:c.show,"onUpdate:modelValue":t[4]||(t[4]=s=>c.show=s),color:c.color,location:"bottom right"},{default:e(()=>[r(g(c.text),1)]),_:1},8,["modelValue","color"])])}}},le=P(oe,[["__scopeId","data-v-a862eb8b"]]);export{le as default};

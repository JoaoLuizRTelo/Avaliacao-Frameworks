import{_ as J,a as K}from"./ConfirmDialog-CeGkphes.js";import{f as p,g as M,c as O,h as P,b as a,w as o,r as s,F as Q,o as k,e as l,d as c,a as W,k as X,j as x,u as Y,t as r}from"./index-DYtbXqbq.js";const Z={class:"d-flex align-center justify-space-between mb-4"},ee={class:"d-flex align-center justify-space-between mb-4"},te={class:"font-weight-medium"},oe={class:"text-caption text-medium-emphasis"},ae={class:"text-body-2"},ie={__name:"AppointmentCrud",setup(ne){const{appointments:b,createAppointment:y,updateAppointment:w,deleteAppointment:A,getAppointmentById:V,resetAppointments:C}=Y(),m=p({}),d=p(null),_=p(!1),u=p(null),i=M({show:!1,text:"",color:"success"}),D=[{title:"Cliente",key:"clientName",sortable:!1},{title:"Serviço",key:"service",sortable:!1},{title:"Data e horário",key:"schedule",sortable:!1},{title:"Ações",key:"actions",sortable:!1,align:"end"}],N=O(()=>d.value?"Atualizar atendimento":"Salvar atendimento"),S=n=>{d.value?(w(d.value,n),v("Atendimento atualizado com sucesso!","success")):(y(n),v("Novo atendimento cadastrado!","success")),F()},B=n=>{d.value=n.id,m.value={...V(n.id)}},z=n=>{u.value=n,_.value=!0},$=()=>{u.value&&(A(u.value),v("Atendimento removido.","error"),u.value=null)},j=()=>{C(),v("Agenda restaurada com os dados de exemplo.","info")},v=(n,e)=>{i.text=n,i.color=e,i.show=!0},F=()=>{d.value=null,m.value={}},R=n=>new Date(`${n}T00:00`).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"});return(n,e)=>{const U=s("v-icon"),E=s("v-avatar"),g=s("v-sheet"),h=s("v-col"),f=s("v-btn"),I=s("v-chip"),L=s("v-alert"),T=s("v-data-table"),q=s("v-row"),G=s("v-snackbar");return k(),P(Q,null,[a(q,{class:"ga-6"},{default:o(()=>[a(h,{cols:"12",md:"5"},{default:o(()=>[a(g,{elevation:"2",rounded:"lg",class:"pa-6"},{default:o(()=>[l("div",Z,[e[4]||(e[4]=l("div",null,[l("h2",{class:"text-h5 font-weight-bold mb-1"},"Gerenciar atendimentos"),l("p",{class:"text-body-2 text-medium-emphasis"}," Cadastre novos atendimentos ou atualize os existentes. As alterações são salvas automaticamente no navegador. ")],-1)),a(E,{size:"52",color:"primary",variant:"tonal"},{default:o(()=>[a(U,{color:"primary-darken-4"},{default:o(()=>[...e[3]||(e[3]=[c("mdi-calendar-edit",-1)])]),_:1})]),_:1})]),a(K,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),"submit-label":N.value,onSubmit:S},null,8,["modelValue","submit-label"])]),_:1})]),_:1}),a(h,{cols:"12",md:"7"},{default:o(()=>[a(g,{elevation:"2",rounded:"lg",class:"pa-6"},{default:o(()=>[l("div",ee,[e[6]||(e[6]=l("h2",{class:"text-h5 font-weight-bold"},"Lista de atendimentos",-1)),x(b).length?(k(),W(f,{key:0,color:"secondary","prepend-icon":"mdi-backup-restore",variant:"tonal",onClick:j},{default:o(()=>[...e[5]||(e[5]=[c(" Restaurar amostra ",-1)])]),_:1})):X("",!0)]),a(T,{headers:D,items:x(b),"items-per-page":5,"item-key":"id",class:"elevation-0"},{"item.clientName":o(({item:t})=>[l("div",null,[l("div",te,r(t.clientName),1),l("div",oe,r(t.professional||"Equipe"),1)])]),"item.schedule":o(({item:t})=>[l("div",ae,r(R(t.date))+" às "+r(t.time),1)]),"item.service":o(({item:t})=>[a(I,{color:"primary",variant:"tonal"},{default:o(()=>[c(r(t.service),1)]),_:2},1024)]),"item.actions":o(({item:t})=>[a(f,{icon:"mdi-pencil",variant:"text",color:"primary",onClick:H=>B(t)},null,8,["onClick"]),a(f,{icon:"mdi-delete",variant:"text",color:"error",onClick:H=>z(t.id)},null,8,["onClick"])]),"no-data":o(()=>[a(L,{type:"info",variant:"tonal",color:"primary"},{default:o(()=>[...e[7]||(e[7]=[c(" Nenhum atendimento cadastrado até o momento. Utilize o formulário ao lado para adicionar o primeiro! ",-1)])]),_:1})]),_:1},8,["items"])]),_:1})]),_:1})]),_:1}),a(J,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),title:"Remover atendimento",message:"Deseja realmente excluir este atendimento?",onConfirm:$},null,8,["modelValue"]),a(G,{modelValue:i.show,"onUpdate:modelValue":e[2]||(e[2]=t=>i.show=t),color:i.color,location:"bottom right"},{default:o(()=>[c(r(i.text),1)]),_:1},8,["modelValue","color"])],64)}}};export{ie as default};
